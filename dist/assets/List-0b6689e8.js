import{c as T,r as a,s as U,j as l,a as r,L as F,N as $,t as j,b as S}from"./index-365972c4.js";import{N as J}from"./index-1371593b.js";import{s as x}from"./sortBy-e718266e.js";import{I as A}from"./IconTrashLines-22f93834.js";import{I as _}from"./IconPlus-3387c191.js";import{I as G}from"./IconEye-4d17240e.js";import{F as H,z as f}from"./index-2a736327.js";import"./floating-ui.dom.browser.min-41a73232.js";import"./_baseIsEqual-d2b5e4bf.js";import"./_defineProperty-7bda4dbe.js";const te=()=>{const v=T(),[d,g]=a.useState([]),[y,m]=a.useState(1),L=[10,20,30,50,100],[n,D]=a.useState(L[0]),[u,p]=a.useState([]),[k,i]=a.useState([]),[b,N]=a.useState([]),[c,w]=a.useState(""),[h,z]=a.useState({columnAccessor:"employeeNumber",direction:"asc"});a.useEffect(()=>{v(U("Employee List"))},[v]);const B=async()=>{try{const o=((await S.get("https://cybitbackend.onrender.com/api/employees")).data.data||[]).map(s=>({id:s._id,employeeNumber:s.employeeNumber,name:s.name,mobileNumber:s.mobileNumber||"N/A",date:s.dateOfJoining?new Date(s.dateOfJoining).toLocaleDateString():"N/A",amount:s.salary||0,currency:s.currency||"USD",status:{tooltip:"Active",color:"success"}}));g(o),p(x(o,"employeeNumber")),i(x(o,"employeeNumber").slice(0,n))}catch(e){console.error("Error fetching employees:",e),f.error("Failed to fetch employees")}};a.useEffect(()=>{B()},[]);const C=async(e=null)=>{if(window.confirm("Are you sure you want to delete selected row(s)?"))try{if(e){await S.delete(`https://cybitbackend.onrender.com/api/employees/${e}`);const t=d.filter(o=>o.id!==e);g(t),p(t),i(t),N([]),w(""),f.success("Employee deleted successfully")}else if(b.length){for(const s of b)await S.delete(`https://cybitbackend.onrender.com/api/employees/${s.id}`);const t=b.map(s=>s.id),o=d.filter(s=>!t.includes(s.id));g(o),p(o),i(o),N([]),w(""),m(1),f.success("Selected employees deleted successfully")}}catch(t){console.error("Error deleting employee(s):",t),f.error("Failed to delete employee(s)")}},O={USD:"$","USD - US Dollar":"$","GBP - British Pound":"£","IDR - Indonesian Rupiah":"Rp",INR:"₹","BRL - Brazilian Real":"R$",EUR:"€","TRY - Turkish Lira":"₺"};return a.useEffect(()=>m(1),[n]),a.useEffect(()=>{const e=(y-1)*n,t=e+n;i([...u.slice(e,t)])},[y,n,u]),a.useEffect(()=>{p(d.filter(e=>{var t,o,s,E,R,P,I;return((t=e.employeeNumber)==null?void 0:t.toLowerCase().includes(c.toLowerCase()))||((o=e.name)==null?void 0:o.toLowerCase().includes(c.toLowerCase()))||((s=e.mobileNumber)==null?void 0:s.toLowerCase().includes(c.toLowerCase()))||((E=e.date)==null?void 0:E.toLowerCase().includes(c.toLowerCase()))||((R=e.amount)==null?void 0:R.toString().includes(c.toLowerCase()))||((I=(P=e.status)==null?void 0:P.tooltip)==null?void 0:I.toLowerCase().includes(c.toLowerCase()))}))},[c,d]),a.useEffect(()=>{const e=x(u,h.columnAccessor);i(h.direction==="desc"?e.reverse():e),m(1)},[h]),l("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:[r(H,{position:"top-right",reverseOrder:!1}),l("div",{className:"invoice-table",children:[l("div",{className:"mb-4.5 px-5 flex md:items-center md:flex-row flex-col gap-5",children:[l("div",{className:"flex items-center gap-2",children:[l("button",{type:"button",className:"btn btn-danger gap-2",onClick:()=>C(),children:[r(A,{}),"Delete"]}),l(F,{to:"/apps/employee/add",className:"btn btn-primary gap-2",children:[r(_,{}),"Add New"]})]}),r("div",{className:"ltr:ml-auto rtl:mr-auto",children:r("input",{type:"text",className:"form-input w-auto",placeholder:"Search...",value:c,onChange:e=>w(e.target.value)})})]}),r("div",{className:"datatables pagination-padding",children:r(J,{className:"whitespace-nowrap table-hover invoice-table",records:k,columns:[{accessor:"employeeNumber",sortable:!0,title:"Employee Number"},{accessor:"name",sortable:!0,title:"Name"},{accessor:"mobileNumber",sortable:!0,title:"Mobile Number"},{accessor:"date",sortable:!0,title:"Joining Date"},{accessor:"amount",sortable:!0,title:"Salary",titleClassName:"text-right",render:({amount:e,currency:t})=>l("div",{className:"text-right font-semibold",children:[O[t]||t||"$",e]})},{accessor:"status",sortable:!0,title:"Status",render:({status:e})=>r("span",{className:`badge badge-outline-${(e==null?void 0:e.color)||"default"}`,children:(e==null?void 0:e.tooltip)||"N/A"})},{accessor:"action",title:"Actions",sortable:!1,textAlignment:"center",render:({id:e})=>l("div",{className:"flex gap-4 items-center w-max mx-auto",children:[r($,{to:`/apps/employee/edit/${e}`,className:"flex hover:text-info",children:r(j,{className:"w-4.5 h-4.5"})}),r($,{to:`/apps/employee/Preview/${e}`,className:"btn btn-primary w-full gap-2",children:r(G,{className:"w-4.5 h-4.5"})}),r("button",{type:"button",className:"flex hover:text-danger",onClick:()=>C(e),children:r(A,{})})]})}],highlightOnHover:!0,totalRecords:u.length,recordsPerPage:n,page:y,onPageChange:m,recordsPerPageOptions:L,onRecordsPerPageChange:D,sortStatus:h,onSortStatusChange:z,selectedRecords:b,onSelectedRecordsChange:N,paginationText:({from:e,to:t,totalRecords:o})=>`Showing ${e} to ${t} of ${o} entries`})})]})]})};export{te as default};
