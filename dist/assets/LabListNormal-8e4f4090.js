import{r as h,i as P,j as t,a,b}from"./index-365972c4.js";import{c as v}from"./createLucideIcon-9e7f1bc4.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],d=v("check",k),R=()=>{const[o,m]=h.useState("monthly"),[u,l]=h.useState(!1),p=P(),n=JSON.parse(localStorage.getItem("user")),i=localStorage.getItem("token"),f={monthly:499,yearly:4999},x=async()=>{l(!0);try{return(await b.post("#",{planType:o},{headers:{Authorization:`Bearer ${i}`}})).data}catch{return alert("Failed to create subscription order."),l(!1),null}},g=e=>new Promise((s,r)=>{const c={key:"rzp_test_xxxxx",amount:e.amount,currency:"INR",name:"OnRequest Lab",description:"Subscription Payment",order_id:e.order_id,handler:function(S){s(S)},prefill:{name:n==null?void 0:n.name,email:n==null?void 0:n.email},theme:{color:"#4f46e5"}},y=new window.Razorpay(c);y.on("payment.failed",()=>r("Payment failed")),y.open()}),N=async(e,s)=>{try{return(await b.post("#",{...e,order_id:s},{headers:{Authorization:`Bearer ${i}`}})).data}catch{return alert("Payment verification failed!"),null}},w=async()=>{if(!i)return alert("Session expired! Please login again."),p("/login");const e=await x();if(!e)return;let s;try{s=await g(e)}catch(c){alert(c),l(!1);return}const r=await N(s,e.order_id);r!=null&&r.success?(alert("Subscription activated successfully!"),p("/dashboard")):alert("Verification failed."),l(!1)};return t("div",{className:"p-6 max-w-3xl mx-auto",children:[a("h2",{className:"text-2xl font-bold mb-4",children:"Choose Your Plan"}),t("div",{className:"flex gap-4 mb-6",children:[a("button",{className:`px-4 py-2 rounded ${o==="monthly"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>m("monthly"),children:"Monthly"}),a("button",{className:`px-4 py-2 rounded ${o==="yearly"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>m("yearly"),children:"Yearly"})]}),t("div",{className:"border p-6 rounded-xl shadow",children:[a("h3",{className:"text-xl font-semibold mb-2",children:o==="monthly"?"Monthly Subscription":"Yearly Subscription"}),t("p",{className:"text-3xl font-bold mb-4",children:["â‚¹",f[o]]}),t("ul",{className:"mb-4 space-y-2",children:[t("li",{className:"flex items-center gap-2",children:[a(d,{size:18})," Unlimited Labs"]}),t("li",{className:"flex items-center gap-2",children:[a(d,{size:18})," Priority Support"]}),t("li",{className:"flex items-center gap-2",children:[a(d,{size:18})," Free Updates"]})]}),a("button",{disabled:u,onClick:w,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg",children:u?"Processing...":"Buy Now"})]})]})};export{R as default};
