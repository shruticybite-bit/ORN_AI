import{c as F,r,s as L,j as a,a as e,f as T,g as $,b as N}from"./index-365972c4.js";import{S as w}from"./sweetalert2.all-8a74e5ff.js";import{I as A}from"./IconListCheck-efb758de.js";import{I as D}from"./IconLayoutGrid-cdf1c73b.js";import{I as B}from"./IconFacebook-a52b5e0b.js";import{I as j}from"./IconInstagram-07fd46fb.js";import{I as E}from"./IconLinkedin-8a8d4f39.js";import{I as M}from"./IconTwitter-c8cb5ce2.js";import{Y as h,y as C}from"./transition-512b60f1.js";import"./keyboard-c037d58b.js";import"./open-closed-2d1d7def.js";import"./hidden-7992949e.js";const k="#",Q=()=>{const p=F(),[u,f]=r.useState(!1),[l,g]=r.useState("list"),[o,I]=r.useState(""),[i,x]=r.useState([]),[d,b]=r.useState([]),[S,y]=r.useState(!1),c=(t=>{const n=`; ${document.cookie}`.split(`; ${t}=`);if(n.length===2)return n.pop().split(";").shift()})("access"),_=async()=>{y(!0);try{const t=await N.get(k,{headers:c?{Authorization:`Bearer ${c}`}:{},withCredentials:!0}),s=Array.isArray(t.data.results)?t.data.results:[];x(s),b(s)}catch(t){console.error("Error fetching contacts:",t),m("Failed to fetch contacts","error")}finally{y(!1)}},v=async t=>{if((await w.fire({title:"Are you sure?",text:"This contact will be permanently deleted!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await N.delete(`${k}${t.contact_id}/`,{headers:c?{Authorization:`Bearer ${c}`}:{},withCredentials:!0}),x(i.filter(n=>n.contact_id!==t.contact_id)),m("Contact deleted successfully!")}catch(n){console.error("Delete failed:",n),m("Failed to delete contact","error")}},m=(t,s="success")=>{w.fire({toast:!0,position:"top",showConfirmButton:!1,timer:2500,icon:s,title:t})};return r.useEffect(()=>{b(i.filter(t=>`${t.first_name} ${t.last_name}`.toLowerCase().includes(o.toLowerCase())))},[o,i]),r.useEffect(()=>{p(L("Contacts")),_()},[p]),a("div",{children:[a("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e("h2",{className:"text-xl font-semibold",children:"Contacts"}),a("div",{className:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto",children:[a("div",{className:"flex gap-3",children:[e("button",{type:"button",className:`btn btn-outline-primary p-2 ${l==="list"&&"bg-primary text-white"}`,onClick:()=>g("list"),children:e(A,{})}),e("button",{type:"button",className:`btn btn-outline-primary p-2 ${l==="grid"&&"bg-primary text-white"}`,onClick:()=>g("grid"),children:e(D,{})})]}),a("div",{className:"relative",children:[e("input",{type:"text",placeholder:"Search Contacts",className:"form-input py-2 ltr:pr-11 rtl:pl-11 peer",value:o,onChange:t=>I(t.target.value)}),e("button",{type:"button",className:"absolute ltr:right-[11px] rtl:left-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary",children:e(T,{className:"mx-auto"})})]})]})]}),l==="list"&&e("div",{className:"mt-5 panel p-0 border-0 overflow-hidden",children:e("div",{className:"table-responsive",children:a("table",{className:"table-striped table-hover",children:[e("thead",{children:a("tr",{children:[e("th",{children:"ID"}),e("th",{children:"Full Name"}),e("th",{children:"Email"}),e("th",{children:"Phone"}),e("th",{children:"Message"}),e("th",{children:"Date"}),e("th",{className:"!text-center",children:"Actions"})]})}),e("tbody",{children:S?e("tr",{children:e("td",{colSpan:7,className:"text-center text-muted py-4",children:"Loading..."})}):d.length===0?e("tr",{children:e("td",{colSpan:7,className:"text-center text-muted py-4",children:"No contacts found."})}):d.map(t=>a("tr",{children:[e("td",{children:t.contact_id}),a("td",{children:[t.first_name," ",t.last_name]}),e("td",{children:t.email}),e("td",{children:t.phone}),e("td",{className:"max-w-[250px] truncate",children:t.message}),e("td",{children:new Date(t.timestamp).toLocaleString()}),e("td",{className:"text-center",children:e("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>v(t),children:"Delete"})})]},t.contact_id))})]})})}),l==="grid"&&e("div",{className:"grid xl:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-6 mt-5",children:d.map(t=>a("div",{className:"bg-white dark:bg-[#1c232f] rounded-md p-5 shadow text-center relative",children:[a("h4",{className:"text-lg font-semibold mb-2",children:[t.first_name," ",t.last_name]}),e("p",{className:"text-sm text-gray-500 mb-1",children:t.email}),e("p",{className:"text-sm text-gray-500 mb-1",children:t.phone}),e("p",{className:"text-sm text-gray-600 italic mb-4 truncate",children:t.message}),a("div",{className:"flex justify-center space-x-3 mb-4",children:[e(B,{}),e(j,{}),e(E,{}),e(M,{})]}),e("button",{type:"button",className:"btn btn-outline-danger w-full",onClick:()=>v(t),children:"Delete"})]},t.contact_id))}),e(h,{appear:!0,show:u,as:r.Fragment,children:a(C,{as:"div",open:u,onClose:()=>f(!1),className:"relative z-[51]",children:[e(h.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(h.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a(C.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:()=>f(!1),className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e($,{})}),e("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] py-3 px-5",children:"Add Contact"})]})})})})]})})]})};export{Q as default};
