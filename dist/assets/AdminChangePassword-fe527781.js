import{r as u,j as d,a as e,y as c,b as x}from"./index-4f69de9b.js";import y from"./MessagesList-717c9dc5.js";const C=()=>{const[s,m]=u.useState({new_password1:"",new_password2:""}),[r,i]=u.useState({}),[w,g]=u.useState(!1),b=a=>{const t=`; ${document.cookie}`.split(`; ${a}=`);return t.length===2?t.pop().split(";").shift():null},h=a=>{m({...s,[a.target.name]:a.target.value}),i({...r,[a.target.name]:""})};return d("div",{className:"p-6 md:p-10 bg-gray-50 min-h-[calc(100vh-80px)]",children:[d("div",{className:"max-w-3xl mx-auto bg-white shadow-md rounded-xl p-8",children:[e("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 border-b pb-3",children:"Change Password"}),d("form",{onSubmit:async a=>{var t;a.preventDefault(),i({});const p=b("access");if(!p){c.error("No access token found. Please log in again.");return}if(s.new_password1!==s.new_password2){i({new_password2:"Passwords do not match."});return}g(!0);try{await x.post("#",{new_password1:s.new_password1,new_password2:s.new_password2},{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}}),c.success("Password changed successfully!"),m({new_password1:"",new_password2:""})}catch(f){if((t=f.response)!=null&&t.data){const l={},o=f.response.data;for(const n in o)Array.isArray(o[n])?l[n]=o[n][0]:typeof o[n]=="string"&&(l[n]=o[n]);Object.keys(l).length===0&&o.detail?c.error(o.detail):i(l)}else c.error("Something went wrong. Please try again.")}finally{g(!1)}},className:"space-y-5",children:[d("div",{children:[e("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"New Password"}),e("input",{type:"password",name:"new_password1",value:s.new_password1,onChange:h,className:`w-full border rounded-lg p-2.5 focus:ring-2 focus:outline-none ${r.new_password1?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-indigo-500"}`,placeholder:"Enter new password",required:!0}),r.new_password1&&e("p",{className:"text-red-500 text-sm mt-1",children:r.new_password1})]}),d("div",{children:[e("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Confirm New Password"}),e("input",{type:"password",name:"new_password2",value:s.new_password2,onChange:h,className:`w-full border rounded-lg p-2.5 focus:ring-2 focus:outline-none ${r.new_password2?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-indigo-500"}`,placeholder:"Re-enter new password",required:!0}),r.new_password2&&e("p",{className:"text-red-500 text-sm mt-1",children:r.new_password2})]}),e("div",{className:"flex justify-end",children:e("button",{type:"submit",disabled:w,className:`px-6 py-2 rounded-lg text-white font-medium ${w?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:w?"Updating...":"Change Password"})})]})]}),e(y,{})]})};export{C as default};
