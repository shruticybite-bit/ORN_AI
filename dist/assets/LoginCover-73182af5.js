import{c as $,i as U,u as v,r as l,s as E,j as s,a as e,D as F,F as P,e as _,a0 as o,L as y,k as D,a1 as A,y as d,b as R}from"./index-32628024.js";import{I as T}from"./IconMail-db7411aa.js";import{I as B}from"./IconLockDots-2f4662f1.js";import{I as G}from"./IconInstagram-15a18e57.js";import{I as K,a as M}from"./IconGoogle-ade1abf5.js";import{I as O}from"./IconTwitter-a531ca2f.js";const W=()=>{const m=$();U();const x=v(a=>a.themeConfig)||{},N=v(a=>a.themeConfig.rtlClass)==="rtl",[p,k]=l.useState(x.locale||"en"),[u,C]=l.useState(""),[g,I]=l.useState(""),[w,h]=l.useState(!1),[n,f]=l.useState(""),j=x.languageList||[{code:"en",name:"English"},{code:"ae",name:"Arabic"}];l.useEffect(()=>{m(E("Login Boxed"))},[m]);const L=a=>{k(a),m(A(a.toLowerCase()==="ae"?"rtl":"ltr")),o.changeLanguage(a),d.info(`Language changed to ${a.toUpperCase()}`,{position:"top-center"})},S=async a=>{var i;if(a.preventDefault(),f(""),h(!0),!u.trim()||!g.trim()){f("Please fill in all fields."),h(!1);return}try{const t=(await R.post("#",{username:u,password:g},{headers:{"Content-Type":"application/json"},withCredentials:!0})).data;t.user?(document.cookie=`username=${encodeURIComponent(t.user.username)}; path=/; max-age=86400`,document.cookie=`user_id=${encodeURIComponent(t.user.id)}; path=/; max-age=86400`,document.cookie=`email=${encodeURIComponent(t.user.email)}; path=/; max-age=86400`,document.cookie=`is_staff=${t.user.is_staff}; path=/; max-age=86400`,document.cookie=`access=${t.access}; path=/; max-age=86400`,localStorage.setItem("jwt-auth",t.access),localStorage.setItem("email",t.user.email),d.success("Login successful!",{position:"top-center"}),setTimeout(()=>{t.user.id===1?window.location.href="/index":window.location.href="/"},1200)):d.error(t.message||"Login failed",{position:"top-center"})}catch(c){console.error(c);let t="Invalid username or password.";if((i=c.response)!=null&&i.data){const r=c.response.data;if(typeof r=="object"&&!Array.isArray(r)){const b=Object.keys(r)[0];b&&Array.isArray(r[b])?t=r[b][0]:r.error?t=r.error:r.message?t=r.message:r.detail&&(t=r.detail)}else typeof r=="string"&&(t=r)}f(t),d.error(t,{position:"top-center"})}finally{h(!1)}};return s("div",{children:[e("div",{className:"absolute inset-0",children:e("img",{src:"/assets/images/auth/bg-gradient.png",alt:"background",className:"h-full w-full object-cover"})}),s("div",{className:"relative flex min-h-screen items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center px-6 py-10 dark:bg-[#060818] sm:px-16",children:[e("img",{src:"/assets/images/auth/coming-soon-object1.png",alt:"",className:"absolute left-0 top-1/2 h-full max-h-[893px] -translate-y-1/2"}),e("img",{src:"/assets/images/auth/coming-soon-object2.png",alt:"",className:"absolute left-24 top-0 h-40 md:left-[30%]"}),e("img",{src:"/assets/images/auth/coming-soon-object3.png",alt:"",className:"absolute right-0 top-0 h-[300px]"}),e("img",{src:"/assets/images/auth/polygon-object.svg",alt:"",className:"absolute bottom-0 end-[28%]"}),e("div",{className:"relative w-full max-w-[870px] rounded-md bg-white/60 dark:bg-black/50 p-2 backdrop-blur-lg shadow-lg",children:s("div",{className:"relative flex flex-col justify-center rounded-md bg-white/80 px-6 lg:min-h-[758px] py-20 dark:bg-black/60",children:[e("div",{className:"absolute top-6 end-6",children:e(F,{offset:[0,8],placement:`${N?"bottom-start":"bottom-end"}`,btnClassName:"flex items-center gap-2.5 rounded-lg border border-white-dark/30 bg-white px-2 py-1.5 text-white-dark hover:border-primary hover:text-primary dark:bg-black",button:s(P,{children:[e("img",{src:`/assets/images/flags/${p.toUpperCase()}.svg`,alt:"flag",className:"h-5 w-5 rounded-full object-cover"}),e("div",{className:"text-base font-bold uppercase",children:p}),e(_,{})]}),children:e("ul",{className:"!px-2 grid grid-cols-2 gap-2 font-semibold w-[280px] text-dark dark:text-white",children:j.map(a=>e("li",{children:s("button",{type:"button",className:`flex w-full hover:text-primary rounded-lg ${p===a.code?"bg-primary/10 text-primary":""}`,onClick:()=>L(a.code),children:[e("img",{src:`/assets/images/flags/${a.code.toUpperCase()}.svg`,alt:"flag",className:"w-5 h-5 rounded-full object-cover"}),e("span",{className:"ltr:ml-3 rtl:mr-3",children:a.name})]})},a.code))})})}),s("div",{className:"mx-auto w-full max-w-[440px]",children:[s("div",{className:"mb-10",children:[s("h1",{className:"text-3xl font-extrabold uppercase text-primary md:text-4xl",children:[o.t("Sign in")," 1"]}),e("p",{className:"text-base font-bold text-white-dark",children:o.t("Enter your credentials to log in")})]}),s("form",{className:"space-y-5 dark:text-white",onSubmit:S,children:[s("div",{children:[e("label",{htmlFor:"Username",children:o.t("Username")}),s("div",{className:"relative text-white-dark",children:[e("input",{id:"Username",type:"text",placeholder:o.t("Enter Username"),className:`form-input ps-10 placeholder:text-white-dark ${n.toLowerCase().includes("username")?"border-red-500":""}`,value:u,onChange:a=>C(a.target.value)}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:e(T,{fill:!0})})]})]}),s("div",{children:[e("label",{htmlFor:"Password",children:o.t("Password")}),s("div",{className:"relative text-white-dark",children:[e("input",{id:"Password",type:"password",placeholder:o.t("Enter Password"),className:`form-input ps-10 placeholder:text-white-dark ${n.toLowerCase().includes("password")?"border-red-500":""}`,value:g,onChange:a=>I(a.target.value)}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:e(B,{fill:!0})})]})]}),n&&e("p",{className:"text-red-500 text-sm",children:n}),e("button",{type:"submit",disabled:w,className:"btn btn-gradient !mt-6 w-full uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:w?"Signing in...":"Sign in"})]}),e("ul",{className:"flex justify-center gap-3 text-white",children:[G,K,O,M].map((a,i)=>e("li",{children:e(y,{to:"#",className:"inline-flex h-8 w-8 items-center justify-center rounded-full transition hover:scale-110",style:{background:"linear-gradient(135deg, rgba(239,18,98,1) 0%, rgba(67,97,238,1) 100%)"},children:e(a,{})})},i))}),s("div",{className:"text-center mt-6 dark:text-white",children:[o.t("Employee account?")," ",e(y,{to:"/auth/cover-login",className:"uppercase text-primary underline transition hover:text-black dark:hover:text-white",children:o.t("Employee Sign In")})]})]})]})})]}),e(D,{autoClose:2e3,theme:"colored"})]})};export{W as default};
