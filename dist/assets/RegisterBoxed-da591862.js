import{c as P,i as F,r as l,s as L,j as s,F as A,a,a0 as $,L as j,k as D,b as R,y as m}from"./index-ddd0bdee.js";import{I as c}from"./IconUser-236180eb.js";import{I as O}from"./IconMail-573c0ac7.js";import{I as k}from"./IconLockDots-46e26512.js";import{c as U}from"./index-ab287509.js";import{N as z,F as Z}from"./Footer-809c793e.js";import"./createLucideIcon-1a266af8.js";const K=()=>{const p=P(),h=F();l.useEffect(()=>{p(L("Register Boxed"))},[p]);const S=U.getAll().map(e=>({dialCode:e.dialCode,name:e.name,code:e.countryCode})),[t,u]=l.useState({first_name:"",last_name:"",email:"",username:"",phone:"",country_code:"+91",password1:"",password2:""}),[n,g]=l.useState({}),[o,b]=l.useState({}),[x,f]=l.useState(!1),C=()=>{let e={};const r=/^[A-Za-z\s]{2,}$/,i=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;return(!t.first_name||!r.test(t.first_name))&&(e.first_name="First name must be at least 2 letters."),(!t.last_name||!r.test(t.last_name))&&(e.last_name="Last name must be at least 2 letters."),(!t.email||!i.test(t.email))&&(e.email="Enter a valid email."),(!t.username||t.username.length<4)&&(e.username="Username must be at least 4 characters."),(!t.password1||t.password1.length<6)&&(e.password1="Password must be at least 6 characters."),t.password1!==t.password2&&(e.password2="Passwords do not match."),g(e),Object.keys(e).length===0},w=e=>{u({...t,[e.target.name]:e.target.value}),g(r=>({...r,[e.target.name]:""})),b(r=>({...r,[e.target.name]:""}))},E=async e=>{var i,y;if(e.preventDefault(),!C())return;const r=`${t.country_code}${t.phone}`;f(!0);try{(i=(await R.post("#",{...t,phone:r,is_superuser:!1,is_staff:!1,is_active:!0})).data)!=null&&i.detail?(sessionStorage.setItem("formData",JSON.stringify(t)),localStorage.setItem("email",t.email),m.success("OTP sent successfully!",{position:"top-center"}),h("/otp")):(m.success("Registration successful!",{position:"top-center"}),h("/"))}catch(d){if((y=d.response)!=null&&y.data){const N=d.response.data,v={};Object.keys(N).forEach(_=>{v[_]=N[_][0]}),b(v),m.error("Fix red fields.",{position:"top-center"})}else m.error("Something went wrong.",{position:"top-center"})}finally{f(!1)}},I=[{name:"first_name",label:"First Name",icon:a(c,{})},{name:"last_name",label:"Last Name",icon:a(c,{})},{name:"email",label:"Email",icon:a(O,{}),type:"email"},{name:"username",label:"Username",icon:a(c,{})},{name:"password1",label:"Password",icon:a(k,{}),type:"password"},{name:"password2",label:"Confirm Password",icon:a(k,{}),type:"password"}];return s(A,{children:[a(z,{}),s("div",{className:"relative flex min-h-screen items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center px-6 py-10 dark:bg-[#060818] sm:px-16",children:[s("div",{className:"w-full max-w-[480px] rounded-lg bg-white/80 dark:bg-black/60 backdrop-blur-md p-8 shadow-lg",children:[a("h1",{className:"text-3xl font-extrabold text-primary mb-6 uppercase text-center",children:$.t("Sign Up")}),s("form",{onSubmit:E,className:"space-y-3",children:[a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:I.map(e=>s("div",{className:"space-y-1",children:[a("label",{className:"block text-xs font-semibold",children:e.label}),s("div",{className:"relative",children:[a("input",{name:e.name,type:e.type||"text",value:t[e.name],onChange:w,placeholder:`Enter ${e.label}`,className:`form-input ps-9 w-full h-10 text-sm 
                      placeholder:text-white-dark
                      ${n[e.name]||o[e.name]?"border-red-500":""}
                    `}),a("span",{className:"absolute start-3 top-1/2 -translate-y-1/2 text-white-dark text-sm",children:e.icon})]}),(n[e.name]||o[e.name])&&a("p",{className:"text-red-500 text-xs mt-0.5",children:n[e.name]||o[e.name]})]},e.name))}),s("div",{className:"space-y-1",children:[a("label",{className:"block text-xs font-semibold",children:"Phone"}),s("div",{className:"flex gap-2",children:[a("select",{className:"border rounded-md bg-white text-black px-2 w-28 h-10 text-sm",value:t.country_code,onChange:e=>u(r=>({...r,country_code:e.target.value})),children:S.map(e=>s("option",{value:e.dialCode,children:[e.dialCode," (",e.name,")"]},e.code))}),s("div",{className:"relative flex-1",children:[a("input",{name:"phone",type:"tel",value:t.phone,onChange:w,placeholder:"Enter Phone Number",className:`form-input ps-9 w-full h-10 text-sm
                    ${n.phone||o.phone?"border-red-500":""}
                  `}),a("span",{className:"absolute start-3 top-1/2 -translate-y-1/2 text-white-dark text-sm",children:a(c,{})})]})]}),(n.phone||o.phone)&&a("p",{className:"text-red-500 text-xs mt-0.5",children:n.phone||o.phone})]}),a("button",{type:"submit",disabled:x,className:"btn btn-gradient w-full mt-4 uppercase h-10 text-sm",children:x?"Registering...":"Sign Up"})]}),s("div",{className:"text-center mt-6",children:["Already have an account?"," ",a(j,{to:"/login",className:"text-primary underline",children:"Sign In"})]})]}),a(D,{autoClose:2e3,theme:"colored"})]}),a(Z,{})]})};export{K as default};
