import{l as p,r as n,a as s,j as L,b as S}from"./index-365972c4.js";const k="#",A=()=>{const h=p(),[e,g]=n.useState(null),[y,d]=n.useState(!0),[u,w]=n.useState(70),c=n.useRef(!1),a=new URLSearchParams(h.search).get("user"),l=localStorage.getItem("jwt-auth")||localStorage.getItem("access")||"";n.useEffect(()=>{(async()=>{if(!a||!l){d(!1);return}try{const i=(await S.get(`${k}/lab/userinst/${a}/`,{headers:{Authorization:`Bearer ${l}`}})).data||[],o=i.find(x=>x.status==="Launched")||i[0];g(o||null)}catch(r){console.error("Error fetching instance:",r)}finally{d(!1)}})()},[a,l]),n.useEffect(()=>{const t=i=>{if(!c.current)return;const o=i.clientX/window.innerWidth*100;o>30&&o<80&&w(o)},r=()=>{c.current=!1,document.body.style.cursor="default"};return window.addEventListener("mousemove",t),window.addEventListener("mouseup",r),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",r)}},[]);const m=()=>{c.current=!0,document.body.style.cursor="col-resize"};if(y)return s("div",{className:"flex items-center justify-center h-screen text-gray-300 bg-black",children:"Loading..."});if(!e)return s("div",{className:"flex items-center justify-center h-screen text-gray-300 bg-black",children:"No active instance"});e.instance_ip,e.userName||e.AccessKeyId,e.AccessKeyId||e.SecretAccessKey;const f=e.instance_type||"container",b="#",v=e.web_ssh_url;return L("div",{style:{display:"flex",height:"100vh",width:"100vw",backgroundColor:"#111",overflow:"hidden"},children:[s("div",{style:{width:`${u}%`,backgroundColor:"#fff",borderRight:"2px solid #2d2d2d",overflowY:"auto",display:"flex",flexDirection:"column",transition:"width 0.1s ease-out"},children:s("iframe",{src:b,title:"Tutorial",style:{flex:1,width:"100%",height:"100%",border:"none"}})}),s("div",{onMouseDown:m,style:{width:"6px",cursor:"col-resize",backgroundColor:"#444",transition:"background 0.2s"},onMouseEnter:t=>t.target.style.backgroundColor="#666",onMouseLeave:t=>t.target.style.backgroundColor="#444"}),s("div",{style:{width:`${100-u}%`,backgroundColor:"#1e1e1e",display:"flex",flexDirection:"column"},children:s("iframe",{src:v,title:"WebSSH Terminal",style:{flex:1,width:"100%",height:"100%",border:"none"}})})]})};export{A as default};
